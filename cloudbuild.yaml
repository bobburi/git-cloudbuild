steps:
  - name: 'hashicorp/terraform:latest'
    entrypoint: 'bash'
    args:
      - '-c'
      - 'terraform init'

  - name: 'hashicorp/terraform:latest'
    entrypoint: 'bash'
    args:
      - '-c'
      - 'terraform plan -out=tfplan'

  - name: 'hashicorp/terraform:latest'
    entrypoint: 'bash'
    args:
      - '-c'
      - 'terraform apply -auto-approve tfplan'

options:
  logging:
    driver: 'gcs'
    # Specify a Cloud Storage bucket for build logs
    # Replace 'buildlogs-1231' with the actual name of your bucket
    path: 'gs://buildlogs-1231'
